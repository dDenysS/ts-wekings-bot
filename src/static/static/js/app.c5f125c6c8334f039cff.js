webpackJsonp([9],{"7zck":function(n,t){},F6M3:function(n,t,e){"use strict";e.d(t,"c",function(){return u}),e.d(t,"b",function(){return i}),e.d(t,"a",function(){return r}),e.d(t,"d",function(){return o});var u="AUTH_STATUS",i="AUTH_SING_IN",r="AUTH_LOGOUT",o="AUTH_SUCCESS"},NHnr:function(n,t,e){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var u=e("7+uW"),i=e("F6M3"),r={name:"App",created:function(){this.$store.dispatch(i.c)}},o={render:function(){var n=this.$createElement,t=this._self._c||n;return t("v-app",[t("router-view")],1)},staticRenderFns:[]},a=e("VU/8")(r,o,!1,null,null,null).exports,c=e("/ocq"),s=[{path:"/",component:function(){return e.e(2).then(e.bind(null,"poSA"))},children:[{path:"/",name:"home",component:function(){return e.e(3).then(e.bind(null,"esL9"))}},{path:"bot",name:"bot",component:function(){return e.e(0).then(e.bind(null,"/c0D"))}},{path:"bot/settings",name:"botSettings",component:function(){return e.e(0).then(e.bind(null,"/c0D"))}},{path:"/admin",name:"admin",meta:{admin:!0},component:function(){return e.e(4).then(e.bind(null,"Mpsg"))}},{path:"/404",name:"404",component:function(){return e.e(5).then(e.bind(null,"Ypw0"))}}]},{path:"/auth",redirect:"/auth/login",component:function(){return e.e(1).then(e.bind(null,"HksJ"))},children:[{path:"login",name:"login",component:function(){return e.e(7).then(e.bind(null,"2b1N"))}},{path:"register",name:"register",component:function(){return e.e(6).then(e.bind(null,"pnMn"))}}]},{path:"*",redirect:"/404"}],h=e("NYxO"),d=e("bOdI"),l=e.n(d),m=e("Dd8w"),f=e.n(m),p=e("//Fk"),b=e.n(p),g=e("mtWM"),A=e.n(g).a.create({baseURL:"/api",timeout:5e3,withCredentials:!0});A.interceptors.request.use(function(n){return n},function(n){return b.a.reject(n)}),A.interceptors.response.use(function(n){return n},function(n){return n.response&&401===n.response.status&&M.push({name:"login"}),b.a.reject(n)});var v,w=A;function S(n){if(n.isAuth){var t=window.location.search.substring(1),e=new URLSearchParams(t);M.push(e.get("redirect")||"/")}}var U,_={state:{isAuth:null,isAdmin:null,user:{}},getters:{isAuth:function(n){return n.isAuth},isAdmin:function(n){return n.isAdmin}},actions:(v={},l()(v,i.c,function(n){var t=n.commit;return new b.a(function(n,e){w("public/auth/status").then(function(e){var u=e.data;t(i.d,u),S(u),n()}).catch(function(n){e(n)})})}),l()(v,i.b,function(n,t){var e=n.commit;return new b.a(function(n,u){w.post("public/auth/login",t).then(function(t){var u=t.data;e(i.d,f()({},u,{isAuth:!0})),S(f()({},u,{isAuth:!0})),n()}).catch(function(n){u(n)})})}),l()(v,i.a,function(n){var t=n.commit;return new b.a(function(n,e){w("public/auth/logout").then(function(){t(i.a),M.push({name:"login"}),n()}).catch(function(n){e(n)})})}),v),mutations:(U={},l()(U,i.d,function(n,t){n.isAuth=t.isAuth,n.isAdmin=t.isAdmin}),l()(U,i.a,function(n){n.isAuth=!1,n.isAdmin=!1}),U)};u.default.use(h.a);var T=new h.a.Store({strict:!1,modules:{auth:_}});u.default.use(c.a);var H=new c.a({routes:s,mode:"history"});H.beforeEach(function(n,t,e){var u=T.state.auth;return u.isAuth?"login"===n.name||"register"===n.name?e({name:"home"}):n.meta.admin&&!u.isAdmin?e({name:"home"}):e():"login"===n.name||"register"===n.name?e():e({name:"login",query:{redirect:n.path}})});var M=H,N=new u.default,k=e("3EgV"),y=e.n(k);e("7zck"),e("gJtD"),e("csSS");u.default.use(y.a),u.default.config.productionTip=!1,u.default.prototype.$http=w,u.default.prototype.$bus=N;var D=new u.default({store:T,router:M,render:function(n){return n(a)}}).$mount("#app");window.vm=D},csSS:function(n,t){},gJtD:function(n,t){}},["NHnr"]);
//# sourceMappingURL=app.c5f125c6c8334f039cff.js.map